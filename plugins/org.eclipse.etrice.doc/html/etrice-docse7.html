<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>HelloWorld for C</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<!-- xhtml,3,next,html --> 
<meta name="src" content="etrice-doc.tex" /> 
<meta name="date" content="2013-07-04 15:04:00" /> 
<link rel="stylesheet" type="text/css" href="etrice-doc.css" /> 
</head><body 
>
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="etrice-docse8.html" >next</a>] [<a 
href="etrice-docse6.html" >prev</a>] [<a 
href="etrice-docse6.html#tailetrice-docse6.html" >prev-tail</a>] [<a 
href="#tailetrice-docse7.html">tail</a>] [<a 
href="etrice-docch2.html#etrice-docse7.html" >up</a>] </p></div>
<h3 class="sectionHead"><span class="titlemark">2.5   </span> <a 
 id="x11-380002.5"></a>HelloWorld for C</h3>
<!--l. 3--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.1   </span> <a 
 id="x11-390002.5.1"></a>Scope</h4>
<!--l. 5--><p class="noindent" >In this tutorial you will learn how to create a model for C from scratch. There are some more steps to do in C
compared to Java. The goal is to get familiar with the additional steps. The Java tutorial is a prerequisite for
the following explanations. You will perform the following steps:
</p><!--l. 10--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x11-39002x1">create a new model from scratch for C
     </li>
     <li 
  class="enumerate" id="x11-39004x2">create structure and behavior similar to Java
     </li>
     <li 
  class="enumerate" id="x11-39006x3">create a launch configuration for the C code generator
     </li>
     <li 
  class="enumerate" id="x11-39008x4">setup the C environment
     </li>
     <li 
  class="enumerate" id="x11-39010x5">generate the source code
     </li>
     <li 
  class="enumerate" id="x11-39012x6">run the model</li></ol>
<!--l. 19--><p class="noindent" >Make sure that you have set up the workspace as described in <span 
class="ec-lmsso-10">Setting up the Workspace for C</span>
<span 
class="ec-lmsso-10">Projects</span>.
</p><!--l. 23--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.2   </span> <a 
 id="x11-400002.5.2"></a>Create a new model from scratch</h4>
<!--l. 25--><p class="noindent" >Before you can create a new C-model, you have to create a new C project as described in <span 
class="ec-lmsso-10">Setting up the</span>
<span 
class="ec-lmsso-10">Workspace for C Projects</span>. Remember: </p>
     <ul class="itemize1">
     <li class="itemize">select the <span 
class="ec-lmsso-10">C/C++ </span>perspective
     </li>
     <li class="itemize">From the main menue select <span 
class="ec-lmsso-10">File-&#x003E;New-&#x003E;C Project</span>
                                                                                 
                                                                                 
     </li>
     <li class="itemize">Name the project <span 
class="ec-lmsso-10">HelloWorldC</span>
     </li>
     <li class="itemize">Project type is <span 
class="ec-lmsso-10">Executable / Empty C Project</span>
     </li>
     <li class="itemize">Toolchain is <span 
class="ec-lmsso-10">MinGW</span></li></ul>
<!--l. 36--><p class="noindent" >The workspace should look like this:
</p><!--l. 38--><p class="noindent" ><img 
src="images/016-HelloWorldC01.png" alt="PIC"  
 />
</p><!--l. 41--><p class="noindent" >The next step is to add the model folder: Right click on the new project. Select <span 
class="ec-lmsso-10">New-&#x003E;Folder </span>and name it
<span 
class="ec-lmsso-10">model</span>.
</p><!--l. 44--><p class="noindent" ><img 
src="images/016-HelloWorldC02.png" alt="PIC"  
 />
</p><!--l. 47--><p class="noindent" >Add the model file to the folder. Right click on the new folder. Select <span 
class="ec-lmsso-10">New-&#x003E;file </span>and name it
<span 
class="ec-lmsso-10">HelloWorldC.room</span>.
</p><!--l. 50--><p class="noindent" ><img 
src="images/016-HelloWorldC03.png" alt="PIC"  
 />
</p><!--l. 53--><p class="noindent" >Due to the file ending <span 
class="ec-lmsso-10">.room</span>, the tool will ask you to add the Xtext nature. Answer with <span 
class="ec-lmsso-10">Yes</span>.
</p><!--l. 56--><p class="noindent" ><img 
src="images/016-HelloWorldC04.png" alt="PIC"  
 />
</p><!--l. 59--><p class="noindent" >The workspace should look like this:
</p><!--l. 61--><p class="noindent" ><img 
src="images/016-HelloWorldC05.png" alt="PIC"  
 />
</p><!--l. 66--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.3   </span> <a 
 id="x11-410002.5.3"></a>Create the HelloWorld model</h4>
<!--l. 68--><p class="noindent" >Once the model file is created and the Xtext nature is added, you can create the model as you did it for Java.
Creating the model is not the focus of this tutorial. Therefore copy and paste the following code into your
model file. Optionally you can open and layout the diagrams. Recognize the C specific parts:
</p>
     <ul class="itemize1">
     <li class="itemize">The action code contains C instead of Java. Later versions will contain a common action language,
     but for the moment the action language is target specific.
     </li>
     <li class="itemize">The application must be shutdown on model level (see also <span 
class="ec-lmsso-10">etRuntimeConfig.h</span>).</li></ul>
                                                                                 
                                                                                 
<div class="verbatim" id="verbatim-2">
RoomModel&#x00A0;HelloWorldCModel&#x00A0;{
&#x00A0;<br />import&#x00A0;room.basic.types.*&#x00A0;from&#x00A0;"../../org.eclipse.etrice.modellib.c/model/Types.room"
&#x00A0;<br />SubSystemClass&#x00A0;HelloWorldCSubSysClass&#x00A0;{
&#x00A0;<br />ActorRef&#x00A0;HelloETriceTopRef:AHelloWorldCTop
&#x00A0;<br />}
&#x00A0;<br />ActorClass&#x00A0;AHelloWorldCTop&#x00A0;{
&#x00A0;<br />Structure&#x00A0;{&#x00A0;}
&#x00A0;<br />Behavior&#x00A0;{
&#x00A0;<br />StateMachine&#x00A0;{
&#x00A0;<br />Transition&#x00A0;init:&#x00A0;initial&#x00A0;-&#x003E;&#x00A0;state0&#x00A0;{&#x00A0;}
&#x00A0;<br />State&#x00A0;state0&#x00A0;{
&#x00A0;<br />entry&#x00A0;{
&#x00A0;<br />"printf(\"HelloWorldC&#x00A0;!\\n\");"
&#x00A0;<br />"SubSysClass_shutdown();"
&#x00A0;<br />"\t\t\t\t\t\t"
&#x00A0;<br />}
&#x00A0;<br />}
&#x00A0;<br />}
&#x00A0;<br />}
&#x00A0;<br />}
&#x00A0;<br />}
</div>
<!--l. 101--><p class="nopar" >
</p><!--l. 103--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.4   </span> <a 
 id="x11-420002.5.4"></a>Create a launch configuration to start the C code generator</h4>
<!--l. 105--><p class="noindent" >Other than in Java a launch configuration for the C code generator must be created.
</p><!--l. 107--><p class="noindent" >From the <span 
class="ec-lmsso-10">Run </span>menu select <span 
class="ec-lmsso-10">Run Configurations</span>
</p><!--l. 109--><p class="noindent" ><img 
src="images/016-HelloWorldC06.png" alt="PIC"  
 />
</p><!--l. 112--><p class="noindent" >Within the dialog select <span 
class="ec-lmsso-10">e</span><span 
class="ec-lmsso-10">Trice</span> <span 
class="ec-lmsso-10">C Generator </span>and click the <span 
class="ec-lmsso-10">New </span>button to create a new launch
configuration.
</p><!--l. 115--><p class="noindent" ><img 
src="images/016-HelloWorldC07.png" alt="PIC"  
 />
</p><!--l. 118--><p class="noindent" >A new configuration should be created. Name it <span 
class="ec-lmsso-10">gen_HelloWorldC </span>and add the model via one of the <span 
class="ec-lmsso-10">add</span>
buttons.
</p><!--l. 121--><p class="noindent" ><img 
src="images/016-HelloWorldC08.png" alt="PIC"  
 />
</p><!--l. 124--><p class="noindent" >In the <span 
class="ec-lmsso-10">Refresh </span>tab select <span 
class="ec-lmsso-10">The entire workspace</span>
</p><!--l. 126--><p class="noindent" ><img 
src="images/016-HelloWorldC09.png" alt="PIC"  
 />
</p><!--l. 129--><p class="noindent" >In the <span 
class="ec-lmsso-10">Common </span>tab select <span 
class="ec-lmsso-10">Shared file </span>and add the <span 
class="ec-lmsso-10">HelloWorldC </span>project via the <span 
class="ec-lmsso-10">Browse </span>button.
</p><!--l. 132--><p class="noindent" ><img 
src="images/016-HelloWorldC10.png" alt="PIC"  
 />
</p><!--l. 135--><p class="noindent" >Apply your changes. The new configuration should now exist in your workspace.
</p><!--l. 137--><p class="noindent" ><img 
src="images/016-HelloWorldC11.png" alt="PIC"  
 />
                                                                                 
                                                                                 
</p><!--l. 141--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.5   </span> <a 
 id="x11-430002.5.5"></a>Generate the code</h4>
<!--l. 143--><p class="noindent" >Now you can generate the code as you know it from Java. Right click on the launch configuration and run it as
<span 
class="ec-lmsso-10">gen_HelloWorldC</span>.
</p><!--l. 146--><p class="noindent" ><img 
src="images/016-HelloWorldC12.png" alt="PIC"  
 />
</p><!--l. 149--><p class="noindent" >The code should be generated.
</p><!--l. 151--><p class="noindent" ><img 
src="images/016-HelloWorldC13.png" alt="PIC"  
 />
</p><!--l. 154--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.6   </span> <a 
 id="x11-440002.5.6"></a>Setup the include path</h4>
<!--l. 156--><p class="noindent" >Before you can build the application you must setup the include path for the runtime system.
Right click the project and select <span 
class="ec-lmsso-10">Properties</span>. Add the include path as described in <span 
class="ec-lmsso-10">setting up the</span>
<span 
class="ec-lmsso-10">workspace</span>.
</p><!--l. 160--><p class="noindent" ><img 
src="images/016-HelloWorldC14.png" alt="PIC"  
 />
</p><!--l. 163--><p class="noindent" >Add the runtime library.
</p><!--l. 165--><p class="noindent" ><img 
src="images/016-HelloWorldC15.png" alt="PIC"  
 />
</p><!--l. 168--><p class="noindent" >Recognize the name of the library ("org.eclipse.etrice.runtime.c"). The library file on your disk is
"liborg.eclipse.etrice.runtime.c.a".
</p><!--l. 171--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.7   </span> <a 
 id="x11-450002.5.7"></a>Build and run the model</h4>
<!--l. 173--><p class="noindent" >Now you can build the application. Click the build button to build the application. Run the application as
<span 
class="ec-lmsso-10">Local C/C++ Application</span>. Verify the output.
</p><!--l. 177--><p class="noindent" ><img 
src="images/016-HelloWorldC16.png" alt="PIC"  
 />
</p><!--l. 180--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">2.5.8   </span> <a 
 id="x11-460002.5.8"></a>Summary</h4>
<!--l. 182--><p class="noindent" >You are now familiar with all necessary steps to create, build and run an eTrice C model from scratch. You are
able to create a launch configuration to start the code generator and to perform all necessary settings to
compile and link the application.
</p><!--l. 186--><p class="noindent" >The next tutorial provides an exercise to get more familiar with these working steps.
                                                                                 
                                                                                 
</p>
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="etrice-docse8.html" >next</a>] [<a 
href="etrice-docse6.html" >prev</a>] [<a 
href="etrice-docse6.html#tailetrice-docse6.html" >prev-tail</a>] [<a 
href="etrice-docse7.html" >front</a>] [<a 
href="etrice-docch2.html#etrice-docse7.html" >up</a>] </p></div>
<!--l. 1--><p class="noindent" ><a 
 id="tailetrice-docse7.html"></a> </p> 
</body></html> 
