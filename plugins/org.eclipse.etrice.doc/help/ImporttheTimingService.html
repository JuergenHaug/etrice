<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Import the Timing Service</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="eTrice User Guide">
<link rel="up" href="TutorialBlinky.html" title="Tutorial Blinky">
<link rel="prev" href="Createanewprotocol.html" title="Create a new protocol">
<link rel="next" href="Finishthemodelstructure.html" title="Finish the model structure">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Import the Timing Service</h1>
<div class="section" title="Import the Timing Service">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="ImporttheTimingService"></a>Import the Timing Service</h2>
</div>
</div>
</div>
<p>Switching on and off the LED is timing controlled. The timing service is provided from the model library and must be imported before it can be used from the model.</p>
<p>This is the first time you use an element from the modellib. Make sure that your Java Build Path has the appropriate entry to the modellib. Otherwise the jave code, which will be generated from the modellib, can not be referenced.
				(right click to 
				[<span class="citation">Blinky</span>] and select properties. Select the 
				[<span class="citation">Java Build Path</span>] tab) 
			</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/020-Blinky16.png"></div>
<p> 
			
</p>
<p>After the build path is set up return to the model and navigate the cursor at the beginning of the model and import the timing service: </p>
<div class="literallayout">
<p>
<code class="code">RoomModel&nbsp;Blinky&nbsp;{<br>
	
<br>
	import&nbsp;room.basic.service.timing.*&nbsp;from&nbsp;"../../org.eclipse.etrice.modellib/models/TimingService.room"&nbsp;<br>
	
<br>
	LogicalSystem&nbsp;System_Blinky&nbsp;{<br>
		SubSystemRef&nbsp;subsystem:&nbsp;SubSystem_Blinky<br>
	}<br>
...	&nbsp;<br>

</code>
</p>
</div>
<div class="blockquote">
<blockquote class="blockquote">
<p></p>
</blockquote>
</div>
<p>Make sure that the path fits to your folder structure.  </p>
<p>Now it can be used within the model. Right click to 
				[<span class="citation">SubSystem_Blinky</span>] within the outline view. Select 
				[<span class="citation">Edit Structure</span>]. The 
				[<span class="citation">application</span>] is already referenced in the subsystem. Drag and Drop an 
				[<span class="citation">ActorRef</span>] to the 
				[<span class="citation">SubSystem_Blinky</span>] and name it 
				[<span class="citation">timingService</span>]. From the actor class drop down list select 
				[<span class="citation">room.basic.service.timing.ATimingService</span>]. Draw a 
				[<span class="citation">LayerConnection</span>] from 
				[<span class="citation">application</span>] to each service provision point (SPP) of the 
				[<span class="citation">timingService</span>]. The resulting structure should look like this:
			</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/020-Blinky06.png"></div>
<p> 
			
</p>
<p>The current version of eTrice does not provide a graphical element for a service access point (SAP). Therefore the SAPs to access the timing service must be added in the .room file. Open the 
				[<span class="citation">Blinky.room</span>] file and navigate to the 
				[<span class="citation">Blinky</span>] actor. Add the following line to the structure of the actor:
			</p>
<div class="literallayout">
<p>
<code class="code">SAP&nbsp;timer:&nbsp;room.basic.service.timing.PTimeout<br>

</code>
</p>
</div>
<p>Do the same thing for 
				[<span class="citation">BlinkyController</span>].
			</p>
<p>The resulting code should look like this:</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/020-Blinky07.png"></div>
<p>
			
</p>
</div>
</body>
</html>
