<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Import the Timing Service</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="eTrice User Guide">
<link rel="up" href="TutorialBlinky.html" title="Tutorial Blinky">
<link rel="prev" href="Createanewprotocol.html" title="Create a new protocol">
<link rel="next" href="Finishthemodelstructure.html" title="Finish the model structure">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Import the Timing Service</h1>
<div class="section" title="Import the Timing Service">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="ImporttheTimingService"></a>Import the Timing Service</h2>
</div>
</div>
</div>
<p>Switching on and off the LED is timing controlled. Therefore a timing service is needed. To import the timing service in the outline view right click to 
				[<span class="citation">SubSystem_Blinky</span>]. Select 
				[<span class="citation">Edit Structure</span>]. Drag and Drop an 
				[<span class="citation">ActorRef</span>] to the 
				[<span class="citation">SubSystem_Blinky</span>] and name it 
				[<span class="citation">application</span>]. From the actor class drop down list select 
				[<span class="citation">BlinkyTop</span>]. Do the same clicks for the timing service. Name it 
				[<span class="citation">timingService</span>] and from the drop down list select 
				[<span class="citation">room.basic.service.timing.ATimingService</span>]. Draw a 
				[<span class="citation">LayerConnection</span>] from 
				[<span class="citation">application</span>] to each service provision point (SPP) of the 
				[<span class="citation">timingService</span>]. The resulting structure should look like this:
			</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/020-Blinky06.PNG"></div>
<p> 
			
</p>
<p>The current version of eTrice does not provide a graphical element for a service access point (SAP). Therefore the SAPs to access the timing service must be added in the .room file. Open the 
				[<span class="citation">Blinky.room</span>] file and navigate to the 
				[<span class="citation">Blinky</span>] actor. Add the following line to the structure of the actor:
			</p>
<div class="literallayout">
<p>
<code class="code">SAP&nbsp;timer:&nbsp;room.basic.service.timing.PTimeout<br>

</code>
</p>
</div>
<p>Do the same thing for 
				[<span class="citation">BlinkyController</span>].
			</p>
<p>The resulting code should look like this:</p>
<p>
				
</p>
<div class="mediaobject">
<img src="images/020-Blinky07.PNG"></div>
<p>
			
</p>
</div>
</body>
</html>
